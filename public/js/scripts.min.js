/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	__webpack_require__(1);
	
	"use strict";
	
	// Handles todos in the DOM
	var TodosList = {
	    todos: {
	        title: '',
	        list: []
	    },
	    init: function init() {
	        this.eventBinding();
	    },
	    eventBinding: function eventBinding() {
	        var taskInput = $('.task-create input');
	        var taskDelete = $('.col-delete');
	        var taskTodosDisplay = $('.task-todos-display');
	        var removeAllBtn = $('#remove-todos');
	
	        // Add Todos Event
	        taskInput.on('keydown', function (event) {
	            if (event.keyCode == 13) {
	                var newTodo = event.target.value;
	                TodosList.addTodos(newTodo);
	                event.target.value = '';
	            }
	        });
	
	        // Delete Todos Event
	        taskTodosDisplay.on('click', '.col-delete', function (event) {
	            var todoToDelete = event.target.closest('.task-control');
	            TodosList.deleteTodos(todoToDelete);
	        });
	
	        // Change Status
	        taskTodosDisplay.on('click', '.fa', this.toggleStatus.bind(this));
	
	        // Change TodoText
	        // taskTodosDisplay.on('click', 'p', this.changeTodos.bind(this));
	
	        // Remove All Todos
	        removeAllBtn.on('click', this.removeAllTodos.bind(this));
	    },
	    displayTodos: function displayTodos() {
	        var taskTodosDisplay = $('.task-todos-display');
	        taskTodosDisplay[0].innerHTML = '';
	        console.log(this.todos);
	        this.todos.list.forEach(function (item, position) {
	            taskTodosDisplay.append('\n                <div class="task-control" data-position="' + position + '">\n                    <div class="col">\n                        <i class="fa fa-circle-thin"></i>\n                    </div>\n                    <p> ' + item.todoText + ' </p>\n                    <div class="col-delete">\n                        <i class="fa fa-times"></i>\n                    </div>\n                </div>');
	        });
	    },
	    addTitle: function addTitle(newTitle) {
	        this.todos.title = newTitle;
	    },
	    addTodos: function addTodos(newTodo) {
	        this.todos.list.push({
	            todoText: newTodo,
	            completed: false
	        });
	        this.displayTodos();
	    },
	    deleteTodos: function deleteTodos(removeEvent) {
	        var removePosition = removeEvent.dataset.position;
	        this.todos.list.splice(removePosition, 1);
	        this.displayTodos();
	    },
	    removeAllTodos: function removeAllTodos() {
	        this.todos.list.length = 0;
	        this.displayTodos();
	    },
	    toggleStatus: function toggleStatus(event) {
	        var toggleTodoWrapper = event.target.closest('.task-control');
	        var position = toggleTodoWrapper.dataset.position;
	        var todoCompleted = this.todos.list[position];
	
	        if (event.target.className === 'fa fa-circle-thin') {
	            event.target.className = 'fa fa-circle';
	        } else {
	            event.target.className = 'fa fa-circle-thin';
	        }
	        toggleTodoWrapper.classList.toggle('completed-task');
	        todoCompleted.completed = !todoCompleted.completed;
	    }
	};
	
	TodosList.init();
	
	// Handles AJAX Requests
	var DataHandler = {
	    init: function init() {
	        this.cacheDOM();
	        this.eventBinding();
	    },
	    cacheDOM: function cacheDOM() {
	        this.$saveTodosBtn = $('#save-todos');
	        this.$saveModalWrapper = $('#save-modal-wrapper');
	        this.$saveCloseModal = this.$saveModalWrapper.find('.save-modal-close');
	        this.$saveModalDisplay = this.$saveModalWrapper.find('.save-modal-display');
	        this.$saveModalDataBtn = this.$saveModalWrapper.find('.save-modal-data');
	        this.$titleInput = this.$saveModalWrapper.find('.title-wrapper input');
	    },
	    eventBinding: function eventBinding() {
	        this.$saveTodosBtn.on('click', this.displaySaveModal.bind(this));
	        this.$saveCloseModal.on('click', this.displaySaveModal.bind(this));
	        this.$saveModalDataBtn.on('click', this.postTodos.bind(this));
	    },
	    displaySaveModal: function displaySaveModal() {
	        this.$saveModalWrapper.toggleClass('active-modal');
	        this.$saveModalDisplay.toggleClass('active-modal');
	    },
	    postTodos: function postTodos() {
	        var urlPath = window.location.pathname;
	        TodosList.addTitle(this.$titleInput[0].value);
	
	        var postData = {
	            title: TodosList.todos.title,
	            todos: TodosList.todos.list
	        };
	        console.log(postData);
	
	        $.ajax({
	            type: 'POST',
	            url: '/home',
	            dataType: 'json',
	            data: { 'post': JSON.stringify(postData) },
	            success: function success(data) {
	                console.log("Success");
	                TodosList.removeAllTodos();
	                TodosList.todos.title = '';
	            },
	            error: function error(err) {
	                console.log(err);
	            }
	        });
	    }
	};
	
	DataHandler.init();
	
	// Handles Page View Switch: From Todo to List and back
	(function () {
	
	    var PageView = {
	        init: function init() {
	            this.cacheDOM();
	            this.bindEvents();
	        },
	        cacheDOM: function cacheDOM() {
	            this.$mainDisplay = $('.main-display');
	            this.$viewToggleBtn = this.$mainDisplay.find('.more-todos');
	        },
	        bindEvents: function bindEvents() {
	            this.$viewToggleBtn.on('click', this.slideView.bind(this));
	        },
	        slideView: function slideView() {
	            this.$mainDisplay.toggleClass('active-list');
	        }
	    };
	
	    PageView.init();
	})();

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(2);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(4)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.sass", function() {
				var newContent = require("!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.sass");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(3)();
	// imports
	
	
	// module
	exports.push([module.id, "@keyframes headerColors {\n  0% {\n    color: #f7eff1; }\n  50% {\n    color: #f1f1f1; }\n  100% {\n    color: #f7eff1; } }\n\n* {\n  padding: 0;\n  margin: 0; }\n\nbody {\n  font-family: \"Raleway\";\n  background: #f9f9f9; }\n\n.header-wrapper {\n  width: 40px;\n  height: 40px;\n  background: #808080;\n  position: fixed;\n  top: 20px;\n  left: 20px;\n  border-radius: 100%;\n  overflow: hidden;\n  z-index: 10;\n  cursor: pointer;\n  transition: all 250ms linear; }\n  .header-wrapper:hover {\n    width: 300px;\n    height: 300px;\n    border-radius: 0;\n    background: #fff;\n    box-shadow: 0 5px 20px #c8c8c8;\n    transition: all 350ms cubic-bezier(0.47, 0, 0.06, 1.42); }\n    .header-wrapper:hover .header-display {\n      opacity: 1;\n      transition: all 300ms linear 300ms; }\n\n.menu-btn {\n  width: 35px;\n  height: 35px;\n  position: relative; }\n  .menu-btn span {\n    width: 28px;\n    height: 2px;\n    background: #fff;\n    position: absolute;\n    left: 5px; }\n    .menu-btn span:nth-of-type(1) {\n      top: 16px; }\n    .menu-btn span:nth-of-type(2) {\n      top: 22px; }\n\n.user-status {\n  position: fixed;\n  top: 25px;\n  right: 30px; }\n  .user-status h3 {\n    color: #808080;\n    font-size: 20px;\n    font-style: italic;\n    font-weight: bold;\n    letter-spacing: 1px; }\n\n.header-display {\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  transition: all 200ms linear; }\n  .header-display h2 {\n    color: #ef9a9a;\n    font-size: 40px;\n    font-weight: normal;\n    text-align: center;\n    padding-bottom: 10px;\n    letter-spacing: 1px; }\n  .header-display li {\n    width: auto;\n    line-height: 30px;\n    list-style: none;\n    margin-left: 30px; }\n  .header-display a {\n    color: #f1f1f1;\n    font-size: 20px;\n    font-style: italic;\n    font-weight: bold;\n    text-decoration: none;\n    transition: all 350ms linear; }\n    .header-display a:hover {\n      color: #808080; }\n\n#save-modal-wrapper {\n  width: 100%;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  visibility: hidden;\n  opacity: 0;\n  z-index: 100;\n  transition: all 350ms linear 300ms; }\n  #save-modal-wrapper.active-modal {\n    visibility: visible;\n    opacity: 1;\n    transition: all 350ms linear; }\n\n.save-modal-display {\n  width: 95%;\n  height: 300px;\n  max-width: 400px;\n  background: #fff;\n  margin: 0 auto;\n  margin-top: 100px;\n  text-align: center;\n  transition: all 350ms cubic-bezier(0.47, 0, 0.06, 1.42);\n  transform: translateY(-150%); }\n  .save-modal-display.active-modal {\n    transform: translateY(0);\n    transition: all 350ms cubic-bezier(0.47, 0, 0.06, 1.42) 300ms; }\n\n.save-modal-close {\n  position: absolute;\n  top: 8px;\n  right: 14px;\n  cursor: pointer; }\n  .save-modal-close i {\n    color: #808080; }\n\n.title-wrapper {\n  width: 95%;\n  height: auto;\n  padding: 30px 0; }\n  .title-wrapper h3 {\n    color: #ef9a9a;\n    font-size: 20px;\n    font-style: italic;\n    font-weight: bold;\n    text-decoration: none;\n    padding: 10px 0;\n    transition: all 350ms linear; }\n  .title-wrapper input {\n    width: 80%;\n    height: 40px;\n    max-width: 220px;\n    color: #808080;\n    font-size: 20px;\n    font-style: italic;\n    outline: none;\n    border: none;\n    border-bottom: 2px solid #f1f1f1;\n    display: table-cell;\n    padding: 0 1% 0 10px; }\n  .title-wrapper input::-webkit-input-placeholder {\n    color: #f1f1f1; }\n\n.save-modal-btn {\n  width: 95%;\n  height: auto;\n  padding: 30px 0; }\n  .save-modal-btn button, .save-modal-btn a {\n    color: #f1f1f1;\n    font-size: 18px;\n    font-style: italic;\n    font-weight: bold;\n    text-decoration: none;\n    outline: none;\n    box-shadow: none;\n    border: none;\n    background: transparent;\n    letter-spacing: 0.5px;\n    padding-top: 15px;\n    padding-left: 15px;\n    cursor: pointer;\n    transition: all 350ms linear; }\n    .save-modal-btn button:hover, .save-modal-btn a:hover {\n      color: #808080; }\n\n.main-wrapper {\n  width: 100%;\n  height: 100vh;\n  overflow: hidden; }\n\n.main-display {\n  width: 100%;\n  height: 100%;\n  transition: all 350ms cubic-bezier(0.47, 0, 0.06, 1.42);\n  transform: translateY(0); }\n  .main-display.active-list {\n    transform: translateY(-100%); }\n\n.tasker-display {\n  width: 100%;\n  max-width: 450px;\n  min-width: 300px;\n  height: calc(100% - 120px);\n  margin: 0 auto;\n  padding-top: 120px; }\n\n.tasker-header-wrapper {\n  width: 100%;\n  height: auto; }\n\n.tasker-header-display {\n  width: 100%;\n  height: 100%;\n  text-align: center; }\n  .tasker-header-display h1 {\n    color: #ef9a9a;\n    font-size: 100px;\n    font-weight: lighter; }\n\n.task-wrapper {\n  width: 100%;\n  height: auto;\n  background: #fff; }\n\n.task-display {\n  width: 100%;\n  height: 100%; }\n\n.task-create {\n  width: 100%;\n  height: 60px;\n  border-bottom: 2px solid #f1f1f1;\n  display: table; }\n  .task-create input {\n    width: 80%;\n    height: 60px;\n    color: #808080;\n    font-size: 20px;\n    font-style: italic;\n    outline: none;\n    border: none;\n    display: table-cell;\n    padding: 0 1%; }\n  .task-create input::-webkit-input-placeholder {\n    color: #f1f1f1; }\n\n.task-control {\n  width: 100%;\n  height: 60px;\n  border-bottom: 2px solid #f1f1f1;\n  display: table; }\n  .task-control.completed-task {\n    opacity: 0.4; }\n  .task-control p {\n    width: 80%;\n    height: 100%;\n    color: #808080;\n    display: table-cell;\n    font-size: 20px;\n    font-weight: bold;\n    display: table-cell;\n    vertical-align: middle; }\n\n.col {\n  width: 10%;\n  display: table-cell;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer; }\n\n.col-delete {\n  width: 10%;\n  height: 100%;\n  display: table-cell;\n  text-align: center;\n  font-style: bold;\n  vertical-align: middle;\n  cursor: pointer;\n  transition: all 350ms linear; }\n  .col-delete:hover i {\n    color: #ef9a9a; }\n  .col-delete i {\n    color: #808080;\n    transition: all 350ms linear; }\n\n.tasker-buttons {\n  width: 100%;\n  height: 50px;\n  display: table; }\n  .tasker-buttons button {\n    color: #f1f1f1;\n    font-size: 18px;\n    font-style: italic;\n    font-weight: bold;\n    outline: none;\n    box-shadow: none;\n    border: none;\n    background: transparent;\n    letter-spacing: 0.5px;\n    padding-top: 15px;\n    padding-left: 15px;\n    cursor: pointer;\n    transition: all 350ms linear; }\n    .tasker-buttons button:hover {\n      color: #808080; }\n\n.main-list-display {\n  width: 100%;\n  max-width: 450px;\n  min-width: 300px;\n  height: calc(100% - 120px);\n  margin: 0 auto;\n  padding-top: 120px; }\n\n.list-wrapper {\n  width: 100%;\n  height: auto;\n  background: #fff; }\n\n.list-display {\n  width: 100%;\n  height: 100%; }\n\n.form-wrapper {\n  width: 100%;\n  height: auto;\n  padding-top: 60px; }\n\n.form-display {\n  width: 100%;\n  height: 100%;\n  padding: 60px 0;\n  text-align: center; }\n  .form-display h2 {\n    color: #ef9a9a;\n    font-size: 100px;\n    font-weight: lighter;\n    padding: 10px 0; }\n\n.form-container {\n  width: 95%;\n  height: auto;\n  max-width: 450px;\n  margin: 0 auto;\n  text-align: center; }\n\n.form-control {\n  width: 95%;\n  height: 50px;\n  background: #fff;\n  display: table;\n  padding: 3px 0;\n  margin: 2px auto; }\n  .form-control p {\n    color: #ef9a9a;\n    font-size: 20px;\n    font-weight: bold;\n    display: table-cell;\n    vertical-align: middle; }\n  .form-control input {\n    width: 90%;\n    height: 100%;\n    color: #808080;\n    font-size: 20px;\n    font-style: italic;\n    background: transparent;\n    padding: 0 1% 0 30px;\n    border: none; }\n    .form-control input:focus {\n      outline: none;\n      border: none; }\n  .form-control input::-webkit-input-placeholder {\n    color: #f1f1f1; }\n  .form-control button {\n    width: 95%;\n    height: 30px;\n    color: #f1f1f1;\n    font-size: 20px;\n    font-weight: bold;\n    padding-top: 10px;\n    background: transparent;\n    outline: none;\n    border: none;\n    cursor: pointer;\n    transition: all 350ms linear; }\n    .form-control button:hover {\n      color: #808080; }\n", ""]);
	
	// exports


/***/ },
/* 3 */
/***/ function(module, exports) {

	/*
		MIT License http://www.opensource.org/licenses/mit-license.php
		Author Tobias Koppers @sokra
	*/
	// css base code, injected by the css-loader
	module.exports = function() {
		var list = [];
	
		// return the list of modules as css string
		list.toString = function toString() {
			var result = [];
			for(var i = 0; i < this.length; i++) {
				var item = this[i];
				if(item[2]) {
					result.push("@media " + item[2] + "{" + item[1] + "}");
				} else {
					result.push(item[1]);
				}
			}
			return result.join("");
		};
	
		// import a list of modules into the list
		list.i = function(modules, mediaQuery) {
			if(typeof modules === "string")
				modules = [[null, modules, ""]];
			var alreadyImportedModules = {};
			for(var i = 0; i < this.length; i++) {
				var id = this[i][0];
				if(typeof id === "number")
					alreadyImportedModules[id] = true;
			}
			for(i = 0; i < modules.length; i++) {
				var item = modules[i];
				// skip already imported module
				// this implementation is not 100% perfect for weird media query combinations
				//  when a module is imported multiple times with different media queries.
				//  I hope this will never occur (Hey this way we have smaller bundles)
				if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
					if(mediaQuery && !item[2]) {
						item[2] = mediaQuery;
					} else if(mediaQuery) {
						item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
					}
					list.push(item);
				}
			}
		};
		return list;
	};


/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	/*
		MIT License http://www.opensource.org/licenses/mit-license.php
		Author Tobias Koppers @sokra
	*/
	var stylesInDom = {},
		memoize = function(fn) {
			var memo;
			return function () {
				if (typeof memo === "undefined") memo = fn.apply(this, arguments);
				return memo;
			};
		},
		isOldIE = memoize(function() {
			return /msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase());
		}),
		getHeadElement = memoize(function () {
			return document.head || document.getElementsByTagName("head")[0];
		}),
		singletonElement = null,
		singletonCounter = 0,
		styleElementsInsertedAtTop = [];
	
	module.exports = function(list, options) {
		if(false) {
			if(typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
		}
	
		options = options || {};
		// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
		// tags it will allow on a page
		if (typeof options.singleton === "undefined") options.singleton = isOldIE();
	
		// By default, add <style> tags to the bottom of <head>.
		if (typeof options.insertAt === "undefined") options.insertAt = "bottom";
	
		var styles = listToStyles(list);
		addStylesToDom(styles, options);
	
		return function update(newList) {
			var mayRemove = [];
			for(var i = 0; i < styles.length; i++) {
				var item = styles[i];
				var domStyle = stylesInDom[item.id];
				domStyle.refs--;
				mayRemove.push(domStyle);
			}
			if(newList) {
				var newStyles = listToStyles(newList);
				addStylesToDom(newStyles, options);
			}
			for(var i = 0; i < mayRemove.length; i++) {
				var domStyle = mayRemove[i];
				if(domStyle.refs === 0) {
					for(var j = 0; j < domStyle.parts.length; j++)
						domStyle.parts[j]();
					delete stylesInDom[domStyle.id];
				}
			}
		};
	}
	
	function addStylesToDom(styles, options) {
		for(var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];
			if(domStyle) {
				domStyle.refs++;
				for(var j = 0; j < domStyle.parts.length; j++) {
					domStyle.parts[j](item.parts[j]);
				}
				for(; j < item.parts.length; j++) {
					domStyle.parts.push(addStyle(item.parts[j], options));
				}
			} else {
				var parts = [];
				for(var j = 0; j < item.parts.length; j++) {
					parts.push(addStyle(item.parts[j], options));
				}
				stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
			}
		}
	}
	
	function listToStyles(list) {
		var styles = [];
		var newStyles = {};
		for(var i = 0; i < list.length; i++) {
			var item = list[i];
			var id = item[0];
			var css = item[1];
			var media = item[2];
			var sourceMap = item[3];
			var part = {css: css, media: media, sourceMap: sourceMap};
			if(!newStyles[id])
				styles.push(newStyles[id] = {id: id, parts: [part]});
			else
				newStyles[id].parts.push(part);
		}
		return styles;
	}
	
	function insertStyleElement(options, styleElement) {
		var head = getHeadElement();
		var lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];
		if (options.insertAt === "top") {
			if(!lastStyleElementInsertedAtTop) {
				head.insertBefore(styleElement, head.firstChild);
			} else if(lastStyleElementInsertedAtTop.nextSibling) {
				head.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);
			} else {
				head.appendChild(styleElement);
			}
			styleElementsInsertedAtTop.push(styleElement);
		} else if (options.insertAt === "bottom") {
			head.appendChild(styleElement);
		} else {
			throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
		}
	}
	
	function removeStyleElement(styleElement) {
		styleElement.parentNode.removeChild(styleElement);
		var idx = styleElementsInsertedAtTop.indexOf(styleElement);
		if(idx >= 0) {
			styleElementsInsertedAtTop.splice(idx, 1);
		}
	}
	
	function createStyleElement(options) {
		var styleElement = document.createElement("style");
		styleElement.type = "text/css";
		insertStyleElement(options, styleElement);
		return styleElement;
	}
	
	function createLinkElement(options) {
		var linkElement = document.createElement("link");
		linkElement.rel = "stylesheet";
		insertStyleElement(options, linkElement);
		return linkElement;
	}
	
	function addStyle(obj, options) {
		var styleElement, update, remove;
	
		if (options.singleton) {
			var styleIndex = singletonCounter++;
			styleElement = singletonElement || (singletonElement = createStyleElement(options));
			update = applyToSingletonTag.bind(null, styleElement, styleIndex, false);
			remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);
		} else if(obj.sourceMap &&
			typeof URL === "function" &&
			typeof URL.createObjectURL === "function" &&
			typeof URL.revokeObjectURL === "function" &&
			typeof Blob === "function" &&
			typeof btoa === "function") {
			styleElement = createLinkElement(options);
			update = updateLink.bind(null, styleElement);
			remove = function() {
				removeStyleElement(styleElement);
				if(styleElement.href)
					URL.revokeObjectURL(styleElement.href);
			};
		} else {
			styleElement = createStyleElement(options);
			update = applyToTag.bind(null, styleElement);
			remove = function() {
				removeStyleElement(styleElement);
			};
		}
	
		update(obj);
	
		return function updateStyle(newObj) {
			if(newObj) {
				if(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)
					return;
				update(obj = newObj);
			} else {
				remove();
			}
		};
	}
	
	var replaceText = (function () {
		var textStore = [];
	
		return function (index, replacement) {
			textStore[index] = replacement;
			return textStore.filter(Boolean).join('\n');
		};
	})();
	
	function applyToSingletonTag(styleElement, index, remove, obj) {
		var css = remove ? "" : obj.css;
	
		if (styleElement.styleSheet) {
			styleElement.styleSheet.cssText = replaceText(index, css);
		} else {
			var cssNode = document.createTextNode(css);
			var childNodes = styleElement.childNodes;
			if (childNodes[index]) styleElement.removeChild(childNodes[index]);
			if (childNodes.length) {
				styleElement.insertBefore(cssNode, childNodes[index]);
			} else {
				styleElement.appendChild(cssNode);
			}
		}
	}
	
	function applyToTag(styleElement, obj) {
		var css = obj.css;
		var media = obj.media;
	
		if(media) {
			styleElement.setAttribute("media", media)
		}
	
		if(styleElement.styleSheet) {
			styleElement.styleSheet.cssText = css;
		} else {
			while(styleElement.firstChild) {
				styleElement.removeChild(styleElement.firstChild);
			}
			styleElement.appendChild(document.createTextNode(css));
		}
	}
	
	function updateLink(linkElement, obj) {
		var css = obj.css;
		var sourceMap = obj.sourceMap;
	
		if(sourceMap) {
			// http://stackoverflow.com/a/26603875
			css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
		}
	
		var blob = new Blob([css], { type: "text/css" });
	
		var oldSrc = linkElement.href;
	
		linkElement.href = URL.createObjectURL(blob);
	
		if(oldSrc)
			URL.revokeObjectURL(oldSrc);
	}


/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZjViZmIyZTVkOWQxZDQ4YzRjOTYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2Fzcy9tYWluLnNhc3M/MWEzMyIsIndlYnBhY2s6Ly8vLi9zcmMvc2Fzcy9tYWluLnNhc3MiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7OztBQ3RDQSxxQkFBUSxDQUFSOztBQUVBOztBQUVBO0FBQ0EsS0FBTSxZQUFZO0FBQ2QsWUFBTztBQUNILGdCQUFPLEVBREo7QUFFSCxlQUFNO0FBRkgsTUFETztBQUtkLFdBQU0sZ0JBQVc7QUFDYixjQUFLLFlBQUw7QUFDSCxNQVBhO0FBUWQsbUJBQWMsd0JBQVc7QUFDckIsYUFBSSxZQUFxQixFQUFFLG9CQUFGLENBQXpCO0FBQ0EsYUFBSSxhQUFxQixFQUFFLGFBQUYsQ0FBekI7QUFDQSxhQUFJLG1CQUFxQixFQUFFLHFCQUFGLENBQXpCO0FBQ0EsYUFBSSxlQUFxQixFQUFFLGVBQUYsQ0FBekI7O0FBRUE7QUFDQSxtQkFBVSxFQUFWLENBQWEsU0FBYixFQUF3QixVQUFTLEtBQVQsRUFBZ0I7QUFDcEMsaUJBQUksTUFBTSxPQUFOLElBQWlCLEVBQXJCLEVBQXlCO0FBQ3JCLHFCQUFJLFVBQVUsTUFBTSxNQUFOLENBQWEsS0FBM0I7QUFDQSwyQkFBVSxRQUFWLENBQW1CLE9BQW5C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YWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCBmNWJmYjJlNWQ5ZDFkNDhjNGM5NlxuICoqLyIsInJlcXVpcmUoJy4uL3Nhc3MvbWFpbi5zYXNzJyk7XHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8vIEhhbmRsZXMgdG9kb3MgaW4gdGhlIERPTVxyXG5jb25zdCBUb2Rvc0xpc3QgPSB7XHJcbiAgICB0b2Rvczoge1xyXG4gICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICBsaXN0OiBbXVxyXG4gICAgfSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCaW5kaW5nKCk7XHJcbiAgICB9LFxyXG4gICAgZXZlbnRCaW5kaW5nOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdGFza0lucHV0ICAgICAgICAgID0gJCgnLnRhc2stY3JlYXRlIGlucHV0Jyk7XHJcbiAgICAgICAgdmFyIHRhc2tEZWxldGUgICAgICAgICA9ICQoJy5jb2wtZGVsZXRlJyk7XHJcbiAgICAgICAgdmFyIHRhc2tUb2Rvc0Rpc3BsYXkgICA9ICQoJy50YXNrLXRvZG9zLWRpc3BsYXknKTtcclxuICAgICAgICB2YXIgcmVtb3ZlQWxsQnRuICAgICAgID0gJCgnI3JlbW92ZS10b2RvcycpO1xyXG5cclxuICAgICAgICAvLyBBZGQgVG9kb3MgRXZlbnRcclxuICAgICAgICB0YXNrSW5wdXQub24oJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1RvZG8gPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBUb2Rvc0xpc3QuYWRkVG9kb3MobmV3VG9kbyk7XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBEZWxldGUgVG9kb3MgRXZlbnRcclxuICAgICAgICB0YXNrVG9kb3NEaXNwbGF5Lm9uKCdjbGljaycsICcuY29sLWRlbGV0ZScsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgdmFyIHRvZG9Ub0RlbGV0ZSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcudGFzay1jb250cm9sJyk7XHJcbiAgICAgICAgICAgIFRvZG9zTGlzdC5kZWxldGVUb2Rvcyh0b2RvVG9EZWxldGUpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIENoYW5nZSBTdGF0dXNcclxuICAgICAgICB0YXNrVG9kb3NEaXNwbGF5Lm9uKCdjbGljaycsICcuZmEnLCB0aGlzLnRvZ2dsZVN0YXR1cy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gQ2hhbmdlIFRvZG9UZXh0XHJcbiAgICAgICAgLy8gdGFza1RvZG9zRGlzcGxheS5vbignY2xpY2snLCAncCcsIHRoaXMuY2hhbmdlVG9kb3MuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBBbGwgVG9kb3NcclxuICAgICAgICByZW1vdmVBbGxCdG4ub24oJ2NsaWNrJywgdGhpcy5yZW1vdmVBbGxUb2Rvcy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB9LFxyXG4gICAgZGlzcGxheVRvZG9zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdGFza1RvZG9zRGlzcGxheSA9ICQoJy50YXNrLXRvZG9zLWRpc3BsYXknKTtcclxuICAgICAgICB0YXNrVG9kb3NEaXNwbGF5WzBdLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMudG9kb3MpO1xyXG4gICAgICAgIHRoaXMudG9kb3MubGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRhc2tUb2Rvc0Rpc3BsYXkuYXBwZW5kKGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLWNvbnRyb2xcIiBkYXRhLXBvc2l0aW9uPVwiJHtwb3NpdGlvbn1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLXRoaW5cIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+ICR7aXRlbS50b2RvVGV4dH0gPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtZGVsZXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5gXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYWRkVGl0bGU6IGZ1bmN0aW9uKG5ld1RpdGxlKSB7XHJcbiAgICAgICAgdGhpcy50b2Rvcy50aXRsZSA9IG5ld1RpdGxlO1xyXG4gICAgfSxcclxuICAgIGFkZFRvZG9zOiBmdW5jdGlvbihuZXdUb2RvKSB7XHJcbiAgICAgICAgdGhpcy50b2Rvcy5saXN0LnB1c2goe1xyXG4gICAgICAgICAgICB0b2RvVGV4dDogbmV3VG9kbyxcclxuICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVRvZG9zKCk7XHJcbiAgICB9LFxyXG4gICAgZGVsZXRlVG9kb3M6IGZ1bmN0aW9uKHJlbW92ZUV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHJlbW92ZVBvc2l0aW9uID0gcmVtb3ZlRXZlbnQuZGF0YXNldC5wb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnRvZG9zLmxpc3Quc3BsaWNlKHJlbW92ZVBvc2l0aW9uLCAxKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUb2RvcygpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZUFsbFRvZG9zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLnRvZG9zLmxpc3QubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUb2RvcygpO1xyXG4gICAgfSxcclxuICAgIHRvZ2dsZVN0YXR1czogZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICB2YXIgdG9nZ2xlVG9kb1dyYXBwZXIgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnRhc2stY29udHJvbCcpO1xyXG4gICAgICAgIHZhciBwb3NpdGlvbiAgICAgICAgICA9IHRvZ2dsZVRvZG9XcmFwcGVyLmRhdGFzZXQucG9zaXRpb247XHJcbiAgICAgICAgdmFyIHRvZG9Db21wbGV0ZWQgICAgID0gdGhpcy50b2Rvcy5saXN0W3Bvc2l0aW9uXTtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09ICdmYSBmYS1jaXJjbGUtdGhpbicpIHtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9ICdmYSBmYS1jaXJjbGUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPSAnZmEgZmEtY2lyY2xlLXRoaW4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b2dnbGVUb2RvV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKCdjb21wbGV0ZWQtdGFzaycpO1xyXG4gICAgICAgIHRvZG9Db21wbGV0ZWQuY29tcGxldGVkID0gIXRvZG9Db21wbGV0ZWQuY29tcGxldGVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ub2Rvc0xpc3QuaW5pdCgpO1xyXG5cclxuXHJcblxyXG5cclxuLy8gSGFuZGxlcyBBSkFYIFJlcXVlc3RzXHJcbmNvbnN0IERhdGFIYW5kbGVyID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZURPTSgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRCaW5kaW5nKCk7XHJcbiAgICB9LFxyXG4gICAgY2FjaGVET006IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuJHNhdmVUb2Rvc0J0biAgICAgID0gJCgnI3NhdmUtdG9kb3MnKTtcclxuICAgICAgICB0aGlzLiRzYXZlTW9kYWxXcmFwcGVyICA9ICQoJyNzYXZlLW1vZGFsLXdyYXBwZXInKTtcclxuICAgICAgICB0aGlzLiRzYXZlQ2xvc2VNb2RhbCAgICA9IHRoaXMuJHNhdmVNb2RhbFdyYXBwZXIuZmluZCgnLnNhdmUtbW9kYWwtY2xvc2UnKVxyXG4gICAgICAgIHRoaXMuJHNhdmVNb2RhbERpc3BsYXkgID0gdGhpcy4kc2F2ZU1vZGFsV3JhcHBlci5maW5kKCcuc2F2ZS1tb2RhbC1kaXNwbGF5Jyk7XHJcbiAgICAgICAgdGhpcy4kc2F2ZU1vZGFsRGF0YUJ0biAgPSB0aGlzLiRzYXZlTW9kYWxXcmFwcGVyLmZpbmQoJy5zYXZlLW1vZGFsLWRhdGEnKTtcclxuICAgICAgICB0aGlzLiR0aXRsZUlucHV0ICAgICAgICA9IHRoaXMuJHNhdmVNb2RhbFdyYXBwZXIuZmluZCgnLnRpdGxlLXdyYXBwZXIgaW5wdXQnKTtcclxuICAgIH0sXHJcbiAgICBldmVudEJpbmRpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuJHNhdmVUb2Rvc0J0bi5vbignY2xpY2snLCB0aGlzLmRpc3BsYXlTYXZlTW9kYWwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy4kc2F2ZUNsb3NlTW9kYWwub24oJ2NsaWNrJywgdGhpcy5kaXNwbGF5U2F2ZU1vZGFsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuJHNhdmVNb2RhbERhdGFCdG4ub24oJ2NsaWNrJywgdGhpcy5wb3N0VG9kb3MuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgZGlzcGxheVNhdmVNb2RhbDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy4kc2F2ZU1vZGFsV3JhcHBlci50b2dnbGVDbGFzcygnYWN0aXZlLW1vZGFsJyk7XHJcbiAgICAgICAgdGhpcy4kc2F2ZU1vZGFsRGlzcGxheS50b2dnbGVDbGFzcygnYWN0aXZlLW1vZGFsJyk7XHJcbiAgICB9LFxyXG4gICAgcG9zdFRvZG9zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdXJsUGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcclxuICAgICAgICBUb2Rvc0xpc3QuYWRkVGl0bGUodGhpcy4kdGl0bGVJbnB1dFswXS52YWx1ZSk7XHJcblxyXG4gICAgICAgIHZhciBwb3N0RGF0YSA9IHtcclxuICAgICAgICAgICAgdGl0bGU6IFRvZG9zTGlzdC50b2Rvcy50aXRsZSxcclxuICAgICAgICAgICAgdG9kb3M6IFRvZG9zTGlzdC50b2Rvcy5saXN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHBvc3REYXRhKTtcclxuXHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6ICcvaG9tZScsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6IHsgJ3Bvc3QnIDogSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3VjY2Vzc1wiKTtcclxuICAgICAgICAgICAgICAgIFRvZG9zTGlzdC5yZW1vdmVBbGxUb2RvcygpO1xyXG4gICAgICAgICAgICAgICAgVG9kb3NMaXN0LnRvZG9zLnRpdGxlID0gJyc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbkRhdGFIYW5kbGVyLmluaXQoKTtcclxuXHJcblxyXG5cclxuLy8gSGFuZGxlcyBQYWdlIFZpZXcgU3dpdGNoOiBGcm9tIFRvZG8gdG8gTGlzdCBhbmQgYmFja1xyXG4oZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgY29uc3QgUGFnZVZpZXcgPSB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZURPTSgpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhY2hlRE9NOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy4kbWFpbkRpc3BsYXkgICA9ICQoJy5tYWluLWRpc3BsYXknKTtcclxuICAgICAgICAgICAgdGhpcy4kdmlld1RvZ2dsZUJ0biA9IHRoaXMuJG1haW5EaXNwbGF5LmZpbmQoJy5tb3JlLXRvZG9zJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBiaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy4kdmlld1RvZ2dsZUJ0bi5vbignY2xpY2snLCB0aGlzLnNsaWRlVmlldy5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNsaWRlVmlldzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJG1haW5EaXNwbGF5LnRvZ2dsZUNsYXNzKCdhY3RpdmUtbGlzdCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBQYWdlVmlldy5pbml0KCk7XHJcblxyXG59KSgpO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qcy9mdW5jdGlvbnMuanNcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL21haW4uc2Fzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnNhc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnNhc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvc2Fzcy9tYWluLnNhc3NcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkBrZXlmcmFtZXMgaGVhZGVyQ29sb3JzIHtcXG4gIDAlIHtcXG4gICAgY29sb3I6ICNmN2VmZjE7IH1cXG4gIDUwJSB7XFxuICAgIGNvbG9yOiAjZjFmMWYxOyB9XFxuICAxMDAlIHtcXG4gICAgY29sb3I6ICNmN2VmZjE7IH0gfVxcblxcbioge1xcbiAgcGFkZGluZzogMDtcXG4gIG1hcmdpbjogMDsgfVxcblxcbmJvZHkge1xcbiAgZm9udC1mYW1pbHk6IFxcXCJSYWxld2F5XFxcIjtcXG4gIGJhY2tncm91bmQ6ICNmOWY5Zjk7IH1cXG5cXG4uaGVhZGVyLXdyYXBwZXIge1xcbiAgd2lkdGg6IDQwcHg7XFxuICBoZWlnaHQ6IDQwcHg7XFxuICBiYWNrZ3JvdW5kOiAjODA4MDgwO1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgdG9wOiAyMHB4O1xcbiAgbGVmdDogMjBweDtcXG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgei1pbmRleDogMTA7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICB0cmFuc2l0aW9uOiBhbGwgMjUwbXMgbGluZWFyOyB9XFxuICAuaGVhZGVyLXdyYXBwZXI6aG92ZXIge1xcbiAgICB3aWR0aDogMzAwcHg7XFxuICAgIGhlaWdodDogMzAwcHg7XFxuICAgIGJvcmRlci1yYWRpdXM6IDA7XFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxuICAgIGJveC1zaGFkb3c6IDAgNXB4IDIwcHggI2M4YzhjODtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDM1MG1zIGN1YmljLWJlemllcigwLjQ3LCAwLCAwLjA2LCAxLjQyKTsgfVxcbiAgICAuaGVhZGVyLXdyYXBwZXI6aG92ZXIgLmhlYWRlci1kaXNwbGF5IHtcXG4gICAgICBvcGFjaXR5OiAxO1xcbiAgICAgIHRyYW5zaXRpb246IGFsbCAzMDBtcyBsaW5lYXIgMzAwbXM7IH1cXG5cXG4ubWVudS1idG4ge1xcbiAgd2lkdGg6IDM1cHg7XFxuICBoZWlnaHQ6IDM1cHg7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7IH1cXG4gIC5tZW51LWJ0biBzcGFuIHtcXG4gICAgd2lkdGg6IDI4cHg7XFxuICAgIGhlaWdodDogMnB4O1xcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IDVweDsgfVxcbiAgICAubWVudS1idG4gc3BhbjpudGgtb2YtdHlwZSgxKSB7XFxuICAgICAgdG9wOiAxNnB4OyB9XFxuICAgIC5tZW51LWJ0biBzcGFuOm50aC1vZi10eXBlKDIpIHtcXG4gICAgICB0b3A6IDIycHg7IH1cXG5cXG4udXNlci1zdGF0dXMge1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgdG9wOiAyNXB4O1xcbiAgcmlnaHQ6IDMwcHg7IH1cXG4gIC51c2VyLXN0YXR1cyBoMyB7XFxuICAgIGNvbG9yOiAjODA4MDgwO1xcbiAgICBmb250LXNpemU6IDIwcHg7XFxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7IH1cXG5cXG4uaGVhZGVyLWRpc3BsYXkge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBvcGFjaXR5OiAwO1xcbiAgdHJhbnNpdGlvbjogYWxsIDIwMG1zIGxpbmVhcjsgfVxcbiAgLmhlYWRlci1kaXNwbGF5IGgyIHtcXG4gICAgY29sb3I6ICNlZjlhOWE7XFxuICAgIGZvbnQtc2l6ZTogNDBweDtcXG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcXG4gICAgbGV0dGVyLXNwYWNpbmc6IDFweDsgfVxcbiAgLmhlYWRlci1kaXNwbGF5IGxpIHtcXG4gICAgd2lkdGg6IGF1dG87XFxuICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgICBsaXN0LXN0eWxlOiBub25lO1xcbiAgICBtYXJnaW4tbGVmdDogMzBweDsgfVxcbiAgLmhlYWRlci1kaXNwbGF5IGEge1xcbiAgICBjb2xvcjogI2YxZjFmMTtcXG4gICAgZm9udC1zaXplOiAyMHB4O1xcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICAgIHRyYW5zaXRpb246IGFsbCAzNTBtcyBsaW5lYXI7IH1cXG4gICAgLmhlYWRlci1kaXNwbGF5IGE6aG92ZXIge1xcbiAgICAgIGNvbG9yOiAjODA4MDgwOyB9XFxuXFxuI3NhdmUtbW9kYWwtd3JhcHBlciB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwdmg7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB2aXNpYmlsaXR5OiBoaWRkZW47XFxuICBvcGFjaXR5OiAwO1xcbiAgei1pbmRleDogMTAwO1xcbiAgdHJhbnNpdGlvbjogYWxsIDM1MG1zIGxpbmVhciAzMDBtczsgfVxcbiAgI3NhdmUtbW9kYWwtd3JhcHBlci5hY3RpdmUtbW9kYWwge1xcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xcbiAgICBvcGFjaXR5OiAxO1xcbiAgICB0cmFuc2l0aW9uOiBhbGwgMzUwbXMgbGluZWFyOyB9XFxuXFxuLnNhdmUtbW9kYWwtZGlzcGxheSB7XFxuICB3aWR0aDogOTUlO1xcbiAgaGVpZ2h0OiAzMDBweDtcXG4gIG1heC13aWR0aDogNDAwcHg7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgbWFyZ2luOiAwIGF1dG87XFxuICBtYXJnaW4tdG9wOiAxMDBweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHRyYW5zaXRpb246IGFsbCAzNTBtcyBjdWJpYy1iZXppZXIoMC40NywgMCwgMC4wNiwgMS40Mik7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTE1MCUpOyB9XFxuICAuc2F2ZS1tb2RhbC1kaXNwbGF5LmFjdGl2ZS1tb2RhbCB7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDM1MG1zIGN1YmljLWJlemllcigwLjQ3LCAwLCAwLjA2LCAxLjQyKSAzMDBtczsgfVxcblxcbi5zYXZlLW1vZGFsLWNsb3NlIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogOHB4O1xcbiAgcmlnaHQ6IDE0cHg7XFxuICBjdXJzb3I6IHBvaW50ZXI7IH1cXG4gIC5zYXZlLW1vZGFsLWNsb3NlIGkge1xcbiAgICBjb2xvcjogIzgwODA4MDsgfVxcblxcbi50aXRsZS13cmFwcGVyIHtcXG4gIHdpZHRoOiA5NSU7XFxuICBoZWlnaHQ6IGF1dG87XFxuICBwYWRkaW5nOiAzMHB4IDA7IH1cXG4gIC50aXRsZS13cmFwcGVyIGgzIHtcXG4gICAgY29sb3I6ICNlZjlhOWE7XFxuICAgIGZvbnQtc2l6ZTogMjBweDtcXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgICBwYWRkaW5nOiAxMHB4IDA7XFxuICAgIHRyYW5zaXRpb246IGFsbCAzNTBtcyBsaW5lYXI7IH1cXG4gIC50aXRsZS13cmFwcGVyIGlucHV0IHtcXG4gICAgd2lkdGg6IDgwJTtcXG4gICAgaGVpZ2h0OiA0MHB4O1xcbiAgICBtYXgtd2lkdGg6IDIyMHB4O1xcbiAgICBjb2xvcjogIzgwODA4MDtcXG4gICAgZm9udC1zaXplOiAyMHB4O1xcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XFxuICAgIG91dGxpbmU6IG5vbmU7XFxuICAgIGJvcmRlcjogbm9uZTtcXG4gICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmMWYxZjE7XFxuICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XFxuICAgIHBhZGRpbmc6IDAgMSUgMCAxMHB4OyB9XFxuICAudGl0bGUtd3JhcHBlciBpbnB1dDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7XFxuICAgIGNvbG9yOiAjZjFmMWYxOyB9XFxuXFxuLnNhdmUtbW9kYWwtYnRuIHtcXG4gIHdpZHRoOiA5NSU7XFxuICBoZWlnaHQ6IGF1dG87XFxuICBwYWRkaW5nOiAzMHB4IDA7IH1cXG4gIC5zYXZlLW1vZGFsLWJ0biBidXR0b24sIC5zYXZlLW1vZGFsLWJ0biBhIHtcXG4gICAgY29sb3I6ICNmMWYxZjE7XFxuICAgIGZvbnQtc2l6ZTogMThweDtcXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgICBvdXRsaW5lOiBub25lO1xcbiAgICBib3gtc2hhZG93OiBub25lO1xcbiAgICBib3JkZXI6IG5vbmU7XFxuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcbiAgICBsZXR0ZXItc3BhY2luZzogMC41cHg7XFxuICAgIHBhZGRpbmctdG9wOiAxNXB4O1xcbiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDM1MG1zIGxpbmVhcjsgfVxcbiAgICAuc2F2ZS1tb2RhbC1idG4gYnV0dG9uOmhvdmVyLCAuc2F2ZS1tb2RhbC1idG4gYTpob3ZlciB7XFxuICAgICAgY29sb3I6ICM4MDgwODA7IH1cXG5cXG4ubWFpbi13cmFwcGVyIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDB2aDtcXG4gIG92ZXJmbG93OiBoaWRkZW47IH1cXG5cXG4ubWFpbi1kaXNwbGF5IHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgdHJhbnNpdGlvbjogYWxsIDM1MG1zIGN1YmljLWJlemllcigwLjQ3LCAwLCAwLjA2LCAxLjQyKTtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfVxcbiAgLm1haW4tZGlzcGxheS5hY3RpdmUtbGlzdCB7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTAwJSk7IH1cXG5cXG4udGFza2VyLWRpc3BsYXkge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBtYXgtd2lkdGg6IDQ1MHB4O1xcbiAgbWluLXdpZHRoOiAzMDBweDtcXG4gIGhlaWdodDogY2FsYygxMDAlIC0gMTIwcHgpO1xcbiAgbWFyZ2luOiAwIGF1dG87XFxuICBwYWRkaW5nLXRvcDogMTIwcHg7IH1cXG5cXG4udGFza2VyLWhlYWRlci13cmFwcGVyIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiBhdXRvOyB9XFxuXFxuLnRhc2tlci1oZWFkZXItZGlzcGxheSB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjsgfVxcbiAgLnRhc2tlci1oZWFkZXItZGlzcGxheSBoMSB7XFxuICAgIGNvbG9yOiAjZWY5YTlhO1xcbiAgICBmb250LXNpemU6IDEwMHB4O1xcbiAgICBmb250LXdlaWdodDogbGlnaHRlcjsgfVxcblxcbi50YXNrLXdyYXBwZXIge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IGF1dG87XFxuICBiYWNrZ3JvdW5kOiAjZmZmOyB9XFxuXFxuLnRhc2stZGlzcGxheSB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTsgfVxcblxcbi50YXNrLWNyZWF0ZSB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogNjBweDtcXG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZjFmMWYxO1xcbiAgZGlzcGxheTogdGFibGU7IH1cXG4gIC50YXNrLWNyZWF0ZSBpbnB1dCB7XFxuICAgIHdpZHRoOiA4MCU7XFxuICAgIGhlaWdodDogNjBweDtcXG4gICAgY29sb3I6ICM4MDgwODA7XFxuICAgIGZvbnQtc2l6ZTogMjBweDtcXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xcbiAgICBvdXRsaW5lOiBub25lO1xcbiAgICBib3JkZXI6IG5vbmU7XFxuICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XFxuICAgIHBhZGRpbmc6IDAgMSU7IH1cXG4gIC50YXNrLWNyZWF0ZSBpbnB1dDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7XFxuICAgIGNvbG9yOiAjZjFmMWYxOyB9XFxuXFxuLnRhc2stY29udHJvbCB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogNjBweDtcXG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZjFmMWYxO1xcbiAgZGlzcGxheTogdGFibGU7IH1cXG4gIC50YXNrLWNvbnRyb2wuY29tcGxldGVkLXRhc2sge1xcbiAgICBvcGFjaXR5OiAwLjQ7IH1cXG4gIC50YXNrLWNvbnRyb2wgcCB7XFxuICAgIHdpZHRoOiA4MCU7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgY29sb3I6ICM4MDgwODA7XFxuICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XFxuICAgIGZvbnQtc2l6ZTogMjBweDtcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XFxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH1cXG5cXG4uY29sIHtcXG4gIHdpZHRoOiAxMCU7XFxuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIGN1cnNvcjogcG9pbnRlcjsgfVxcblxcbi5jb2wtZGVsZXRlIHtcXG4gIHdpZHRoOiAxMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZm9udC1zdHlsZTogYm9sZDtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICB0cmFuc2l0aW9uOiBhbGwgMzUwbXMgbGluZWFyOyB9XFxuICAuY29sLWRlbGV0ZTpob3ZlciBpIHtcXG4gICAgY29sb3I6ICNlZjlhOWE7IH1cXG4gIC5jb2wtZGVsZXRlIGkge1xcbiAgICBjb2xvcjogIzgwODA4MDtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDM1MG1zIGxpbmVhcjsgfVxcblxcbi50YXNrZXItYnV0dG9ucyB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogNTBweDtcXG4gIGRpc3BsYXk6IHRhYmxlOyB9XFxuICAudGFza2VyLWJ1dHRvbnMgYnV0dG9uIHtcXG4gICAgY29sb3I6ICNmMWYxZjE7XFxuICAgIGZvbnQtc2l6ZTogMThweDtcXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgb3V0bGluZTogbm9uZTtcXG4gICAgYm94LXNoYWRvdzogbm9uZTtcXG4gICAgYm9yZGVyOiBub25lO1xcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXG4gICAgbGV0dGVyLXNwYWNpbmc6IDAuNXB4O1xcbiAgICBwYWRkaW5nLXRvcDogMTVweDtcXG4gICAgcGFkZGluZy1sZWZ0OiAxNXB4O1xcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgIHRyYW5zaXRpb246IGFsbCAzNTBtcyBsaW5lYXI7IH1cXG4gICAgLnRhc2tlci1idXR0b25zIGJ1dHRvbjpob3ZlciB7XFxuICAgICAgY29sb3I6ICM4MDgwODA7IH1cXG5cXG4ubWFpbi1saXN0LWRpc3BsYXkge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBtYXgtd2lkdGg6IDQ1MHB4O1xcbiAgbWluLXdpZHRoOiAzMDBweDtcXG4gIGhlaWdodDogY2FsYygxMDAlIC0gMTIwcHgpO1xcbiAgbWFyZ2luOiAwIGF1dG87XFxuICBwYWRkaW5nLXRvcDogMTIwcHg7IH1cXG5cXG4ubGlzdC13cmFwcGVyIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiBhdXRvO1xcbiAgYmFja2dyb3VuZDogI2ZmZjsgfVxcblxcbi5saXN0LWRpc3BsYXkge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7IH1cXG5cXG4uZm9ybS13cmFwcGVyIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiBhdXRvO1xcbiAgcGFkZGluZy10b3A6IDYwcHg7IH1cXG5cXG4uZm9ybS1kaXNwbGF5IHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgcGFkZGluZzogNjBweCAwO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyOyB9XFxuICAuZm9ybS1kaXNwbGF5IGgyIHtcXG4gICAgY29sb3I6ICNlZjlhOWE7XFxuICAgIGZvbnQtc2l6ZTogMTAwcHg7XFxuICAgIGZvbnQtd2VpZ2h0OiBsaWdodGVyO1xcbiAgICBwYWRkaW5nOiAxMHB4IDA7IH1cXG5cXG4uZm9ybS1jb250YWluZXIge1xcbiAgd2lkdGg6IDk1JTtcXG4gIGhlaWdodDogYXV0bztcXG4gIG1heC13aWR0aDogNDUwcHg7XFxuICBtYXJnaW46IDAgYXV0bztcXG4gIHRleHQtYWxpZ246IGNlbnRlcjsgfVxcblxcbi5mb3JtLWNvbnRyb2wge1xcbiAgd2lkdGg6IDk1JTtcXG4gIGhlaWdodDogNTBweDtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBkaXNwbGF5OiB0YWJsZTtcXG4gIHBhZGRpbmc6IDNweCAwO1xcbiAgbWFyZ2luOiAycHggYXV0bzsgfVxcbiAgLmZvcm0tY29udHJvbCBwIHtcXG4gICAgY29sb3I6ICNlZjlhOWE7XFxuICAgIGZvbnQtc2l6ZTogMjBweDtcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XFxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH1cXG4gIC5mb3JtLWNvbnRyb2wgaW5wdXQge1xcbiAgICB3aWR0aDogOTAlO1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIGNvbG9yOiAjODA4MDgwO1xcbiAgICBmb250LXNpemU6IDIwcHg7XFxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcXG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxuICAgIHBhZGRpbmc6IDAgMSUgMCAzMHB4O1xcbiAgICBib3JkZXI6IG5vbmU7IH1cXG4gICAgLmZvcm0tY29udHJvbCBpbnB1dDpmb2N1cyB7XFxuICAgICAgb3V0bGluZTogbm9uZTtcXG4gICAgICBib3JkZXI6IG5vbmU7IH1cXG4gIC5mb3JtLWNvbnRyb2wgaW5wdXQ6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIge1xcbiAgICBjb2xvcjogI2YxZjFmMTsgfVxcbiAgLmZvcm0tY29udHJvbCBidXR0b24ge1xcbiAgICB3aWR0aDogOTUlO1xcbiAgICBoZWlnaHQ6IDMwcHg7XFxuICAgIGNvbG9yOiAjZjFmMWYxO1xcbiAgICBmb250LXNpemU6IDIwcHg7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICBwYWRkaW5nLXRvcDogMTBweDtcXG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxuICAgIG91dGxpbmU6IG5vbmU7XFxuICAgIGJvcmRlcjogbm9uZTtcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICB0cmFuc2l0aW9uOiBhbGwgMzUwbXMgbGluZWFyOyB9XFxuICAgIC5mb3JtLWNvbnRyb2wgYnV0dG9uOmhvdmVyIHtcXG4gICAgICBjb2xvcjogIzgwODA4MDsgfVxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vc3JjL3Nhc3MvbWFpbi5zYXNzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbGlzdCA9IFtdO1xyXG5cclxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXHJcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0fTtcclxuXHJcblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XHJcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcclxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xyXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xyXG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XHJcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0cmV0dXJuIGxpc3Q7XHJcbn07XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxudmFyIHN0eWxlc0luRG9tID0ge30sXHJcblx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XHJcblx0XHR2YXIgbWVtbztcclxuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdHJldHVybiBtZW1vO1xyXG5cdFx0fTtcclxuXHR9LFxyXG5cdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xyXG5cdH0pLFxyXG5cdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XHJcblx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcblx0fSksXHJcblx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXHJcblx0c2luZ2xldG9uQ291bnRlciA9IDAsXHJcblx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xyXG5cdGlmKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xyXG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XHJcblx0fVxyXG5cclxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXHJcblx0aWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XHJcblxyXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiA8aGVhZD4uXHJcblx0aWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcclxuXHJcblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcclxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xyXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XHJcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcclxuXHRcdH1cclxuXHRcdGlmKG5ld0xpc3QpIHtcclxuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcclxuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcclxuXHRcdH1cclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xyXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxyXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oKTtcclxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdGlmKGRvbVN0eWxlKSB7XHJcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcclxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xyXG5cdHZhciBzdHlsZXMgPSBbXTtcclxuXHR2YXIgbmV3U3R5bGVzID0ge307XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcclxuXHRcdHZhciBpZCA9IGl0ZW1bMF07XHJcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcclxuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XHJcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcclxuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcclxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxyXG5cdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XHJcblx0fVxyXG5cdHJldHVybiBzdHlsZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpIHtcclxuXHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XHJcblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Bbc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XHJcblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcclxuXHRcdGlmKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xyXG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGhlYWQuZmlyc3RDaGlsZCk7XHJcblx0XHR9IGVsc2UgaWYobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcclxuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0XHR9XHJcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlRWxlbWVudCk7XHJcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XHJcblx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLlwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcclxuXHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdHZhciBpZHggPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlRWxlbWVudCk7XHJcblx0aWYoaWR4ID49IDApIHtcclxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcclxuXHR2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG5cdHN0eWxlRWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpO1xyXG5cdHJldHVybiBzdHlsZUVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpIHtcclxuXHR2YXIgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuXHRsaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGlua0VsZW1lbnQpO1xyXG5cdHJldHVybiBsaW5rRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XHJcblx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XHJcblxyXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xyXG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XHJcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcclxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcclxuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xyXG5cdH0gZWxzZSBpZihvYmouc291cmNlTWFwICYmXHJcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xyXG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdGlmKHN0eWxlRWxlbWVudC5ocmVmKVxyXG5cdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGVFbGVtZW50LmhyZWYpO1xyXG5cdFx0fTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xyXG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0dXBkYXRlKG9iaik7XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcclxuXHRcdGlmKG5ld09iaikge1xyXG5cdFx0XHRpZihuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XHJcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xyXG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xyXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XHJcblx0fTtcclxufSkoKTtcclxuXHJcbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcclxuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XHJcblxyXG5cdGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XHJcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGNzc05vZGUpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xyXG5cdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuXHJcblx0aWYobWVkaWEpIHtcclxuXHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcclxuXHR9XHJcblxyXG5cdGlmKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XHJcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR3aGlsZShzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG5cdFx0fVxyXG5cdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTGluayhsaW5rRWxlbWVudCwgb2JqKSB7XHJcblx0dmFyIGNzcyA9IG9iai5jc3M7XHJcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XHJcblxyXG5cdGlmKHNvdXJjZU1hcCkge1xyXG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcclxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcclxuXHR9XHJcblxyXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xyXG5cclxuXHR2YXIgb2xkU3JjID0gbGlua0VsZW1lbnQuaHJlZjtcclxuXHJcblx0bGlua0VsZW1lbnQuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcblxyXG5cdGlmKG9sZFNyYylcclxuXHRcdFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcclxufVxyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==